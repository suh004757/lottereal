<!DOCTYPE html>
<html lang="ko">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VPG00DG5V1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-VPG00DG5V1');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>관리자 대시보드 | 롯데부동산</title>
  <meta name="robots" content="noindex, nofollow">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap"
    rel="stylesheet">
  <link rel="icon" href="../img/core-img/favicon.ico">
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../css/admin.css">
  <link rel="stylesheet" href="../css/admin-dashboard.css">
</head>

<body class="admin-dashboard-shell">
  <aside class="admin-sidebar">
    <div class="admin-sidebar__header">
      <div class="admin-sidebar__logo">
        <div class="admin-hero__pill">Admin</div>
        <h2>롯데부동산</h2>
      </div>
      <div class="admin-user-info">
        <div class="admin-user-avatar">관</div>
        <div>
          <div class="admin-user-name" id="userName">관리자</div>
          <div class="admin-user-role">Administrator</div>
        </div>
      </div>
    </div>
    <nav class="admin-nav">
      <a href="#dashboard" class="admin-nav__item active" data-section="dashboard">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        <span>대시보드</span>
      </a>
      <a href="#properties" class="admin-nav__item" data-section="properties">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>매물 관리</span>
      </a>
      <a href="#inquiries" class="admin-nav__item" data-section="inquiries">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        <span>문의 관리</span>
      </a>
      <a href="#reports" class="admin-nav__item" data-section="reports">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        <span>시장 리포트</span>
      </a>
    </nav>
    <div class="admin-sidebar__footer">
      <button type="button" id="logoutBtn" class="admin-logout-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        로그아웃
      </button>
    </div>
  </aside>

  <main class="admin-main">
    <section id="dashboard-section" class="admin-section active">
      <div class="admin-section__header">
        <div>
          <p class="admin-kicker">Overview</p>
          <h1>대시보드</h1>
          <p class="admin-sub">전체 매물/문의 현황을 실시간으로 확인하세요.</p>
        </div>
        <div class="admin-status-pill" data-service-status>연결 상태 확인 중...</div>
      </div>

      <div class="admin-stats-grid">
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background: rgba(16, 185, 129, 0.12);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            </svg>
          </div>
          <div class="admin-stat-content">
            <div class="admin-stat-label">전체 매물</div>
            <div class="admin-stat-value" data-stat-listings>0</div>
            <div class="admin-stat-change positive">Supabase 연동</div>
          </div>
        </div>
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background: rgba(37, 99, 235, 0.12);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </div>
          <div class="admin-stat-content">
            <div class="admin-stat-label">최근 7일 신규</div>
            <div class="admin-stat-value" data-stat-new7d>0</div>
            <div class="admin-stat-change">신규 매물</div>
          </div>
        </div>
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background: rgba(245, 158, 11, 0.12);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
            </svg>
          </div>
          <div class="admin-stat-content">
            <div class="admin-stat-label">전체 문의</div>
            <div class="admin-stat-value" data-stat-inquiries>0</div>
            <div class="admin-stat-change">누적 문의</div>
          </div>
        </div>
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background: rgba(139, 92, 246, 0.12);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
          </div>
          <div class="admin-stat-content">
            <div class="admin-stat-label">미확인 문의</div>
            <div class="admin-stat-value" data-stat-unread>0</div>
            <div class="admin-stat-change">읽지 않음</div>
          </div>
        </div>
      </div>

      <div class="admin-card" style="margin-top:24px;">
        <div class="admin-card__header">
          <div>
            <p class="admin-kicker">Recent Activity</p>
            <h2>최근 활동</h2>
          </div>
        </div>
        <ul class="admin-activity-list" data-recent-activities>
          <li class="admin-activity">불러오는 중...</li>
        </ul>
      </div>
    </section>

    <section id="properties-section" class="admin-section">
      <div class="admin-section__header">
        <div>
          <p class="admin-kicker">Property Management</p>
          <h1>매물 관리</h1>
          <p class="admin-sub">등록된 매물을 Supabase에서 불러와 관리합니다.</p>
        </div>
        <button class="admin-primary" id="addPropertyBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="margin-right:8px;">
            <path d="M12 5v14m7-7H5"></path>
          </svg>
          매물 추가
        </button>
      </div>
      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>#</th>
              <th>매물명</th>
              <th>유형</th>
              <th>주소</th>
              <th>등록일</th>
              <th>작업</th>
            </tr>
          </thead>
          <tbody data-admin-listings>
            <tr>
              <td colspan="6">불러오는 중...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="inquiries-section" class="admin-section">
      <div class="admin-section__header">
        <div>
          <p class="admin-kicker">Inquiry Management</p>
          <h1>문의 관리</h1>
          <p class="admin-sub">고객 문의를 확인하고 상태를 업데이트하세요.</p>
        </div>
      </div>
      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>#</th>
              <th>매물명</th>
              <th>이름</th>
              <th>연락처</th>
              <th>내용</th>
              <th>상태</th>
              <th>등록일</th>
              <th>처리</th>
            </tr>
          </thead>
          <tbody data-admin-inquiries>
            <tr>
              <td colspan="8">불러오는 중...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="reports-section" class="admin-section">
      <div class="admin-section__header">
        <div>
          <p class="admin-kicker">Report Management</p>
          <h1>시장 리포트 관리</h1>
          <p class="admin-sub">발행된 리포트를 확인하고 수정하세요.</p>
        </div>
        <button class="admin-primary" id="addReportBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="margin-right:8px;">
            <path d="M12 5v14m7-7H5"></path>
          </svg>
          리포트 작성
        </button>
      </div>
      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>#</th>
              <th>제목</th>
              <th>슬러그</th>
              <th>상태</th>
              <th>조회수</th>
              <th>수정일</th>
              <th>작업</th>
            </tr>
          </thead>
          <tbody data-admin-reports>
            <tr>
              <td colspan="7">불러오는 중...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Property Modal -->
  <div id="propertyModal" class="admin-modal">
    <div class="admin-modal__overlay"></div>
    <div class="admin-modal__content">
      <div class="admin-modal__header">
        <div>
          <p class="admin-kicker">Listing</p>
          <h2 id="modalTitle">매물 추가</h2>
          <p class="admin-sub">사진을 포함해 상세 정보를 입력하세요.</p>
        </div>
        <button class="admin-icon-btn" id="closeModal" aria-label="닫기">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <form id="propertyForm" class="admin-form">
        <div class="admin-form-grid">
          <div>
            <label>매물명 *</label>
            <input type="text" name="title" placeholder="예: 송파 잠실주택 전세" required>
          </div>
          <div>
            <label>거래유형 *</label>
            <select name="transactionType" required>
              <option value="">선택</option>
              <option value="매매">매매</option>
              <option value="전세">전세</option>
              <option value="월세">월세</option>
            </select>
          </div>
          <div id="depositField" style="display:none;">
            <label>보증금</label>
            <input type="number" name="deposit" placeholder="전세 보증금">
          </div>
          <div>
            <label>가격(숫자)</label>
            <input type="number" name="price" placeholder="숫자만 입력">
          </div>
          <div>
            <label>주소</label>
            <input type="text" name="address" placeholder="주소">
          </div>
          <div>
            <label>도시</label>
            <input type="text" name="city" placeholder="예: 서울">
          </div>
          <div>
            <label>구/군</label>
            <input type="text" name="district" placeholder="예: 송파구">
          </div>
          <div>
            <label>연락처 이름</label>
            <input type="text" name="contactName" placeholder="담당자 이름">
          </div>
          <div>
            <label>연락처 전화</label>
            <input type="text" name="contactPhone" placeholder="010-0000-0000">
          </div>
          <div>
            <label>연락처 이메일</label>
            <input type="email" name="contactEmail" placeholder="email@example.com">
          </div>
          <div style="grid-column:1/-1;">
            <label>설명</label>
            <textarea name="description" rows="4" placeholder="매물 상세 설명"></textarea>
          </div>
          <div style="grid-column:1/-1;">
            <label>매물 이미지 (최대 10개, 각 5MB 이하)</label>
            <input type="file" id="propertyImages" name="images" accept="image/*" multiple>
            <div id="imagePreview" class="admin-image-preview"></div>
          </div>
        </div>
        <div id="propertyFormMessage" class="admin-message" aria-live="polite" hidden></div>
        <div class="admin-modal__footer">
          <button type="button" class="admin-btn admin-btn--ghost" id="cancelModal">취소</button>
          <button type="submit" class="admin-primary">저장</button>
        </div>
      </form>
    </div>
  </div>

  <div id="inquiryModal" class="admin-modal">
    <div class="admin-modal__overlay"></div>
    <div class="admin-modal__content">
      <div class="admin-modal__header">
        <div>
          <p class="admin-kicker">Inquiry</p>
          <h2>문의 상세</h2>
          <p class="admin-sub">선택한 문의의 내용을 확인합니다.</p>
        </div>
        <button class="admin-icon-btn" id="closeInquiryModal" aria-label="닫기">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="admin-form" id="inquiryDetailBody">
        <div><strong>매물명</strong>
          <div data-inquiry-title>-</div>
        </div>
        <div><strong>이름</strong>
          <div data-inquiry-name>-</div>
        </div>
        <div><strong>연락처</strong>
          <div data-inquiry-phone>-</div>
        </div>
        <div><strong>이메일</strong>
          <div data-inquiry-email>-</div>
        </div>
        <div><strong>상태</strong>
          <div data-inquiry-status>-</div>
        </div>
        <div><strong>등록일</strong>
          <div data-inquiry-created>-</div>
        </div>
        <div style="grid-column:1/-1;"><strong>내용</strong>
          <div data-inquiry-message class="admin-inquiry-message"></div>
        </div>
      </div>
      <div class="admin-modal__footer">
        <button type="button" class="admin-btn admin-btn--ghost" id="closeInquiryModalFooter">닫기</button>
      </div>
    </div>
  </div>

  <script type="module" src="../js/admin-dashboard.js"></script>
</body>

</html>